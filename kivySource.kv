#:kivy 1.10.0
#:import Factory kivy.factory.Factory
#:import TextInput kivy.uix.textinput

<SelectionMenu>:
    FloatLayout:
        Image:
            id: backgroundImage
            source: 'background.png'
            size: self.texture_size

        Label:
            id: directionsString
            text: "Set parameters and select a source file"
            pos_hint: {'center_x': 0.2, 'center_y': 0.95}

        Button:
            id: launchButton
            pos: (20, 20)
            #pos_hint: {'x':.2, 'y':.2}
            size_hint:  .47, .1
            text:       'Run'
            on_release: root.launch_plotting()

        Label:
            id: sheetEntryLabel
            text: "Excel sheet name:"
            pos_hint: {'center_x': 0.1, 'center_y': 0.55}

        TextInput:
            id: sheetField
            multiline: False
            pos_hint: {'_x': 0.2, 'center_y': 0.5}
            size_hint: 0.5, 0.05
            on_text_validate: root.set_sheet_name(sheetField.text)

        Label:
            id: extrapolationEntryLabel
            text: "Extrapolated days:"
            pos_hint: {'center_x': 0.1, 'center_y': 0.3}

        TextInput:
            id: exrapolationDaysField
            multiline: False
            pos_hint: {'_x': 0.4, 'center_y': 0.25}
            size_hint: 0.5, 0.05
            on_text_validate: root.set_days_to_extrapolate(exrapolationDaysField.text)

        FileChooserListView:
            id: filePathChooser
            size_hint:      0.5, 1
            pos_hint:       {'center_x': 0.75, 'center_y': 0.5}
            on_selection:   root.set_selected_file(*args)

<MessagePopup>:
    title: 'Message'
    title_size: 30
    title_align: 'center'
    size_hint: (None, None)
    size: 400, 400
    auto_dismiss: False

    FloatLayout:
        orientation: 'vertical'
        padding: 10

        Label:
            text: root.message_text
            size_hint: 0.8, 0.2
            pos_hint: {'x': 0.1, 'y': 0.7}
            text_size: self.width, None
            height: self.texture_size[1]
            halign: 'center'

        Button:
            text: 'Close'
            size_hint: 0.8, 0.2
            pos_hint: {'x': 0.1, 'y': 0.1}
            on_release: root.dismiss()

<RootWidget>:
    FloatLayout:
        size: root.size
        pos: root.pos

        SelectionMenu:
